# Real User Monitoring with Cloudwatch RUM

Cloudwatch RUM allows you to monitor how your users are experiencing on the website in near real time, to debug client and (with X-Ray integration) server side issues quickly and easily. 

![](images/Cloudwatch%20RUM%20-%20How%20it%20works.svg)

## Installation

Cloudwatch RUM was set up by [Cloudformation](../../aws/cloudformation-templates/base/cloudwatch.yaml) when creating the Retail Demo Store.  

The three steps you would normally complete to set up RUM are:
1. Authorise your application to send data to RUM, either using Amazon Cognito Identity Pools or a third party vendor.  This installation uses Cognito Identity Pools, which are a way of uniquely identifying each user of the website, whether they're logged in or not.
2. Create a RUM App Monitor, which is the AWS service which will receive all the data from your web application.  You view the automatically created instance [through the console here](https://console.aws.amazon.com/cloudwatch/home?#rum:dashboard?tab=list)
3. Customise and then embed the JavaScript snippet generated when creating the RUM App Monitor (and which you can find in the Configuration tab of the RUM instance on the console) within your website's source code. It will look something like this: 
    ```javascript
    import { AwsRum, AwsRumConfig } from 'aws-rum-web';

    try {
      const config: AwsRumConfig = {
        sessionSampleRate: 1,
        guestRoleArn: "arn:aws:iam::123456789012:role/retaildemostore-Base-ABC12-CognitoUnAuthorizedRole-ABCDEF123456",
        identityPoolId: "us-east-1:abcd123-1234-1234-abcd-1234abcd12",
        endpoint: "https://dataplane.rum.us-east-1.amazonaws.com",
        telemetries: ["performance","errors","http"],
        allowCookies: true,
        enableXRay: true
      };
    
      const APPLICATION_ID: string = 'efgh456-5678-1234-abcd-1234abcd12';
      const APPLICATION_VERSION: string = '1.0.0';
      const APPLICATION_REGION: string = 'us-east-1';
    
      const awsRum: AwsRum = new AwsRum(
        APPLICATION_ID,
        APPLICATION_VERSION,
        APPLICATION_REGION,
        config
      );
    } catch (error) {
      // Ignore errors thrown during CloudWatch RUM web client initialization
    }
    ```

The Retail Demo Store version is within the [AnalyticsHander.js](../../src/web-ui/src/analytics/AnalyticsHandler.js) file,


## JavaScript versions

Single Page application
Customisation options



* diagram showing how it works
* diagram showing how it is integrated into the source code, with a link to the actual source in the retail demo store
* Navigate through the UI using https://catalog.workshops.aws/observability/en-US/rum as an example

